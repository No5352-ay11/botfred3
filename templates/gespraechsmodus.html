<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Botfred â€“ GesprÃ¤chsmodus</title>
</head>
<body>
    <h1>Botfred â€“ GesprÃ¤chsmodus</h1>
    <button onclick="startSpracherkennung()">ðŸŽ™ Spreche mit Botfred</button>
    <p id="antwort"></p>

    <script>
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

        function startSpracherkennung() {
            if (!SpeechRecognition) {
                alert("Dein Browser unterstÃ¼tzt keine Spracheingabe ðŸ˜¢");
                return;
            }

            const recognition = new SpeechRecognition();
            recognition.lang = "de-DE";
            recognition.interimResults = false;

            recognition.onresult = (event) => {
                const frage = event.results[0][0].transcript;
                fetch("/chat", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ frage })
                })
                .then(response => response.json())
                .then(data => {
                    sprechen(data.antwort);
                });
            };

            recognition.start();
        }

        function sprechen(text) {
            const speech = new SpeechSynthesisUtterance(text);
            speech.lang = "de-DE";
            window.speechSynthesis.speak(speech);
        }
    </script>
</body>
</html>
